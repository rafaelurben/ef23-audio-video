<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Audio experiment</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./stylesheets/main.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
</head>

<body>
    <h1>Audio experiment</h1>

    <p>This is just a little experiment :)</p>

    <audio src="audiofiles/example1.mp3"></audio>

    <fieldset id="controls-container" class="borderbox flex">
        <legend>Controls</legend>
        <fieldset class="borderbox flex flex40 m05">
            <legend>
                Microphone
                <abbr title="Use these buttons to work with your microphone as an input device.">
                    <i class="fas fa-question-circle"></i>
                </abbr>
            </legend>
            <button id="startMicButton" class="flex40 m05" onclick="startMic();">Activate Microphone</button>
            <button id="stopMicButton" class="flex40 m05" onclick="stopMic();" disabled>Stop Microphone</button>
        </fieldset>
        <fieldset class="borderbox flex flex40 m05">
            <legend>
                Audio file
                <abbr title="Use these buttons to work with an audio file as an input.">
                    <i class="fas fa-question-circle"></i>
                </abbr>
            </legend>
            <button id="startFileButton" class="flex40 m05" onclick="startFile();">Start Audio File</button>
            <button id="stopFileButton" class="flex40 m05" onclick="stopFile();" disabled>Play Audio File</button>
        </fieldset>
        <fieldset class="borderbox flex flex100 m05">
            <legend>General</legend>
            <fieldset class="borderbox flex m05">
                <legend>
                    Smoothing factor
                    <abbr
                        title="The smoothing factor is used to provide a smoother animation. There's usually no reason to change the default value of 0.9.">
                        <i class="fas fa-question-circle"></i>
                    </abbr>
                </legend>
                <input id="smoothing_factor_slider" type="range" min="0" max="0.99" step="0.01" value="0.9">
                <span id="smoothing_factor_display" style="width: 3em; text-align: center;">0.9</span>
            </fieldset>
            <fieldset class="borderbox flex m05">
                <legend>
                    Display mode
                    <abbr title="Choose metween multiple gain display modes">
                        <i class="fas fa-question-circle"></i>
                    </abbr>
                </legend>
                <select id="displaymode_selector" value="circles">
                    <option value="circles">Circles</option>
                    <option value="rect">Rectangle</option>
                    <option value="bars">Bars</option>
                </select>
            </fieldset>
            <fieldset class="borderbox flex m05">
                <legend>
                    Volume (gain)
                    <abbr title="Use this slider to modify the amplification of the input.">
                        <i class="fas fa-question-circle"></i>
                    </abbr>
                </legend>
                <input id="gain_slider" type="range" min="0" max="10" step="0.1" value="2">
                <span id="gain_display" style="width: 3em; text-align: center;">2</span>
            </fieldset>
        </fieldset>
    </fieldset>

    <fieldset id="output-container" class="borderbox">
        <legend>
            Input volume
            <abbr
                title="If everything works fine in your browser, you should see colored dots displaying your input volume in this area after you activate the microphone or start an audio file.">
                <i class="fas fa-question-circle"></i>
            </abbr>
        </legend>
        <svg id="svg-volume" viewBox="0 0 1000 20" xmlns="http://www.w3.org/2000/svg">

        </svg>
    </fieldset>

    <!--
        TODO:
        - Add more audio examples -> add select box for audio files
        - Add an option to use own audio file: https://stackoverflow.com/questions/43710173/upload-and-play-audio-file-js#43710640
        - Add option to record audio
    -->

    <!-- The magic begins here -->
    <script src="./js/audio.js"></script>
</body>

</html>